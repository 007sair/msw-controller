<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MSW Controller SDK - CDN Example</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
      }
      .container {
        background: #f5f5f5;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }
      button {
        background: #007acc;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 5px;
        border-radius: 4px;
        cursor: pointer;
      }
      button:hover {
        background: #005a9e;
      }
      .code {
        background: #2d2d2d;
        color: #f8f8f2;
        padding: 15px;
        border-radius: 4px;
        overflow-x: auto;
        font-family: "Courier New", monospace;
      }
      .status {
        padding: 10px;
        margin: 10px 0;
        border-radius: 4px;
        background: #e8f5e8;
        border: 1px solid #4caf50;
      }
    </style>
  </head>
  <body>
    <h1>MSW Controller SDK - CDN ä½¿ç”¨ç¤ºä¾‹</h1>

    <div class="container">
      <h2>ğŸ“¦ CDN åŠ è½½æ–¹å¼</h2>
      <div class="code">
        &lt;!-- é€šè¿‡ unpkg CDN åŠ è½½ --&gt; &lt;script
        src="https://unpkg.com/@msw-controller/sdk@latest/dist/index.umd.js"&gt;&lt;/script&gt;
        &lt;!-- æˆ–è€…é€šè¿‡ jsDelivr CDN åŠ è½½ --&gt; &lt;script
        src="https://cdn.jsdelivr.net/npm/@msw-controller/sdk@latest/dist/index.umd.js"&gt;&lt;/script&gt;
      </div>
    </div>

    <div class="container">
      <h2>ğŸ® æ§åˆ¶å™¨æ“ä½œ</h2>
      <button onclick="initController()">åˆå§‹åŒ–æ§åˆ¶å™¨</button>
      <button onclick="showController()">æ˜¾ç¤ºæ§åˆ¶å™¨</button>
      <button onclick="hideController()">éšè—æ§åˆ¶å™¨</button>
      <button onclick="toggleController()">åˆ‡æ¢æ˜¾ç¤º</button>
      <button onclick="destroyController()">é”€æ¯æ§åˆ¶å™¨</button>
      <div id="status" class="status">ç­‰å¾…æ“ä½œ...</div>
    </div>

    <div class="container">
      <h2>ğŸ§ª API æµ‹è¯•</h2>
      <button onclick="makeRequest()">å‘é€æµ‹è¯•è¯·æ±‚</button>
      <div id="response"></div>
    </div>

    <div class="container">
      <h2>ğŸ“ ä½¿ç”¨è¯´æ˜</h2>
      <p>1. ç‚¹å‡» "åˆå§‹åŒ–æ§åˆ¶å™¨" åˆ›å»º MSW Controller å®ä¾‹</p>
      <p>2. ä½¿ç”¨æ§åˆ¶æŒ‰é’®æ¥æ˜¾ç¤º/éšè—æ§åˆ¶å™¨</p>
      <p>3. ç‚¹å‡» "å‘é€æµ‹è¯•è¯·æ±‚" æ¥æµ‹è¯• API æ‹¦æˆªåŠŸèƒ½</p>
      <p>4. åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¯·ç¡®ä¿å…ˆåˆå§‹åŒ– MSW æœåŠ¡</p>
    </div>

    <!-- æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨æœ¬åœ°æ„å»ºçš„æ–‡ä»¶è¿›è¡Œæ¼”ç¤º -->
    <!-- åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¯·ä½¿ç”¨ä¸Šé¢æåˆ°çš„ CDN é“¾æ¥ -->
    <script src="../packages/sdk/dist/index.umd.js"></script>

    <script>
      let controller = null;

      function updateStatus(message) {
        document.getElementById("status").textContent = message;
      }

      function initController() {
        try {
          if (controller) {
            controller.destroy();
          }

          // åˆå§‹åŒ– MSW Controller
          controller = window.MSWControllerSDK.initMSWController({
            position: { x: 20, y: 20 },
            darkMode: false,
            draggable: true,
          });

          updateStatus("âœ… æ§åˆ¶å™¨å·²åˆå§‹åŒ–");
        } catch (error) {
          updateStatus("âŒ åˆå§‹åŒ–å¤±è´¥: " + error.message);
        }
      }

      function showController() {
        if (controller) {
          controller.show();
          updateStatus("ğŸ‘ï¸ æ§åˆ¶å™¨å·²æ˜¾ç¤º");
        } else {
          updateStatus("âš ï¸ è¯·å…ˆåˆå§‹åŒ–æ§åˆ¶å™¨");
        }
      }

      function hideController() {
        if (controller) {
          controller.hide();
          updateStatus("ğŸ™ˆ æ§åˆ¶å™¨å·²éšè—");
        } else {
          updateStatus("âš ï¸ è¯·å…ˆåˆå§‹åŒ–æ§åˆ¶å™¨");
        }
      }

      function toggleController() {
        if (controller) {
          controller.toggle();
          updateStatus("ğŸ”„ æ§åˆ¶å™¨çŠ¶æ€å·²åˆ‡æ¢");
        } else {
          updateStatus("âš ï¸ è¯·å…ˆåˆå§‹åŒ–æ§åˆ¶å™¨");
        }
      }

      function destroyController() {
        if (controller) {
          controller.destroy();
          controller = null;
          updateStatus("ğŸ—‘ï¸ æ§åˆ¶å™¨å·²é”€æ¯");
        } else {
          updateStatus("âš ï¸ æ²¡æœ‰å¯é”€æ¯çš„æ§åˆ¶å™¨");
        }
      }

      async function makeRequest() {
        try {
          const response = await fetch("/api/test", {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
            },
          });

          const data = await response.text();
          document.getElementById("response").innerHTML = `
                    <div class="status">
                        <strong>å“åº”çŠ¶æ€:</strong> ${response.status}<br>
                        <strong>å“åº”å†…å®¹:</strong> ${data}
                    </div>
                `;
        } catch (error) {
          document.getElementById("response").innerHTML = `
                    <div style="background: #ffe8e8; border-color: #f44336;" class="status">
                        <strong>è¯·æ±‚å¤±è´¥:</strong> ${error.message}
                    </div>
                `;
        }
      }

      // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨åˆå§‹åŒ–
      window.addEventListener("load", function () {
        updateStatus("ğŸ“„ é¡µé¢å·²åŠ è½½ï¼Œç‚¹å‡»æŒ‰é’®å¼€å§‹ä½¿ç”¨");
      });
    </script>
  </body>
</html>
